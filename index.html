
<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kids Learning App</title>
</head>
<body>

<script>
/* ---------------- Alphabet Tiles ---------------- */
tile.innerHTML = `<img src="${b.img}" alt="${b.name}">
                  <div class="big">${b.name}</div>`;
tile.addEventListener('click', () => {
  speak(b.name);
  flash(tile);
  showToast(b.name);
});
bArea.appendChild(tile);

/* ---------------- Videos & Books ---------------- */
const videoGrid = document.getElementById('video-grid');
videos.forEach(id => {
  const v = document.createElement('div');
  v.className = 'video';
  v.innerHTML = `
    <iframe src="https://www.youtube.com/embed/${id}"
            frameborder="0"
            allowfullscreen>
    </iframe>`;
  videoGrid.appendChild(v);
});

const booksList = document.getElementById('books-list');
books.forEach(b => {
  const li = document.createElement('li');
  li.innerHTML = `<a href="${b.url}" target="_blank">${b.title}</a>`;
  booksList.appendChild(li);
});

/* ---------------- Controls: Play ABC, Play Range, Search ---------------- */
let abcInterval = null;

function playAllABC() {
  stopSpeech();
  const letters = Array.from({ length: 26 }, (_, i) =>
    String.fromCharCode(65 + i)
  );
  let i = 0;
  abcInterval = setInterval(() => {
    if (i >= letters.length) {
      clearInterval(abcInterval);
      abcInterval = null;
      return;
    }
    const L = letters[i++];
    const tiles = Array.from(
      document.querySelectorAll('#alphabet-area .tile')
    );
    const idx = L.charCodeAt(0) - 65;
    if (tiles[idx]) tiles[idx].click();
  }, 1200);
}

function stopSpeech() {
  if (synth) synth.cancel();
  if (abcInterval) {
    clearInterval(abcInterval);
    abcInterval = null;
  }
}

document.getElementById('searchBox').addEventListener('input', function () {
  const v = this.value.trim().toUpperCase();
  if (!v) return;

  if (/^[A-Z]$/.test(v)) {
    const idx = v.charCodeAt(0) - 65;
    const tiles = document.querySelectorAll('#alphabet-area .tile');
    if (tiles[idx]) {
      tiles[idx].scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  } else if (/^\d+$/.test(v)) {
    const n = parseInt(v, 10);
    const tiles = document.querySelectorAll('#numbers-area .tile');
    if (n >= 1 && n <= 100) {
      tiles[n - 1].scrollIntoView({ behavior: 'smooth', block: 'center' });
    }
  }
});

function playRange() {
  const s = parseInt(document.getElementById('countStart').value || '1', 10);
  const e = parseInt(document.getElementById('countEnd').value || '10', 10);

  if (isNaN(s) || isNaN(e) || s < 1 || e > 100 || s > e) {
    alert('Please enter a valid range 1-100');
    return;
  }

  let cur = s;
  stopSpeech();

  const iv = setInterval(() => {
    speak(`${cur}. ${numberToWords(cur)}`);
    const tiles = document.querySelectorAll('#numbers-area .tile');
    tiles[cur - 1].style.transform = 'translateY(-8px) scale(1.02)';
    setTimeout(() => {
      tiles[cur - 1].style.transform = '';
    }, 600);
    cur++;
    if (cur > e) clearInterval(iv);
  }, 900);
}
</script>

</body>
</html>

